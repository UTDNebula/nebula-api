# CourseBook Scraper

## Installation
To use the CourseBook Scraper:
- Install Python 3.5 or greater
- `pip install -r requirements.txt`
- `mkdir data`

## Usage
**Firestore Credentials** - In the event that you decide to use the `dataToFirestore.py` data import script, be sure to change the name of your credentials file to `credentials.json` to ensure that such information is not accidentally committed to the repository. Otherwise, using the script is as simple as passing in the data `.json` file path to `dataToFirestore.py`. For example, `python dataToFirestore.py data/data.json`. 

**PTGSESSID** - In all cases, the CourseBook Scraper requires that you obtain your PTGSESSID value from [CourseBook](https://coursebook.utdallas.edu). You must be signed in for this to work. After signing in, navigate to your browsers cookies and collect the PTGSESSID value. If you use the default configuration or provide your own configuration file, you can simply set your PTGSESSID in `.env`. 

1. Nebula-API default configuation
   - To use the Nebula-API default configuration, simply run `scraper.py`.
2. Custom configuation
   - To create a custom configuration, you can use the `CoursebookScraper.getSearchSpecifications()` function which will return a dictionary of all search fields and their corresponding options. Create a `.json` file of this dictionary and only populate the lists with the arguments that you wish for your download to contain.
3. Custom implementation
   - The `CoursebookScraper` class can be used in your own programs through a simple import.

## Notes
- When using the `CoursebookScraper.downloadFromConfig()` function, the queries are generated by taking the values in the configuration dictionary and computing the cartesian product. Each query is then individually passed into the `CoursebookScraper.downloadCoursebookData()` function. If this type of configuration processing does not fit your requirements, a custom implementation is required. 
- The CourseBook Scraper actively logs its actions into the logging file provided or the default `scraper.log` file. No errors will reported to the console, therefore, you must check the log after running the program to ensure that the program ran properly. In some cases, errors can be handled by rerunning the program, however, most of the time the data will have to be collected manually such as in the case of a query returning only one section. 
- Due to CourseBook download restrictions, you cannot download more than 300 sections of a course per query. This means that a list of course sections is truncated to a length of 300. The Nebula-API default configuration handles this by individually querying for both undergraduate and graduate level courses separately so that the 300 section limit doesn't impact the download of data from larger subjects such as Computer Science. 